# 聊天室
## 需求(App)
1. 使用者需要一個註冊界面，並且可以把使用者的資料存下來
2. 使用者需要一個登入的界面
3. 使用者登入以後，可以知道目前的在線和不在線的人數
4. 使用者登入以後，需要告訴其他朋友，他已經上線了
5. 使用者下線的時候，會告訴大家下線
6. 使用者在不同的平台上登入也可以重複登入
7.  使用者與好友文字聊天
    * 聊天記錄  
        - 資料庫中無聊天記錄 則 無動作
        - 資料庫中有聊天記錄 則
            1. 從資料庫中取得最新的25筆資料 若無25筆 則 也會取得25筆以內的資料
            2. 從資料庫中取得最新的25筆資料 超過25筆 則 只取得25筆資料，若往上滑到最後的25筆資料 則 往上加入25筆(條件a可能會出現)
    * 發送信息
        - 好友在線(app開著的情況)
            - 不在聊天框內
                1. 發送信息給好友，並且把信息、日期和時間(時分秒)存進 資料庫/檔案 中，並且 發送notification + 鈴聲通知 則 狀態設為 未讀
            - 在同一個聊天框內
                1. 發送信息給好友，並且把信息、日期和時間(時分秒)存進 資料庫/檔案 中 則狀態為 已讀  
        - 好友不在線(app關著的情況)
            - 若socket存在則發送 notification + 鈴聲通知，並且把信息、日期和時間(時分秒)存進 資料庫/檔案 中 則狀態為 未讀  
8. 使用者與好友語音聊天
    * 好友在線(app開著的情況)
        - app界面出現語音聊天畫面
            1. 接通以後可以進行聊天
            2. 拒絕以後，資料庫/檔案 記錄
                - 若在聊天框中則聊天框出現未接對方電話 (已讀)
                - 若不在聊天框中則聊天框出現未接對方電話 (未讀)
    * 好友不在線(app關著的情況)
        - app界面出現語音聊天畫面
            1. 接通以後可以進行聊天
            2. 拒絕以後，資料庫/檔案 記錄
                - 若在聊天框中則聊天框出現未接對方電話 (已讀)
                - 若不在聊天框中則聊天框出現未接對方電話 (未讀)
9. 使用者與好友視訊聊天
    * 好友在線(app開著的情況)
        - app界面出現語音聊天畫面
            1. 接通以後可以進行聊天
            2. 拒絕以後，資料庫/檔案 記錄
                - 若在聊天框中則聊天框出現未接對方視訊電話 (已讀)
                - 若不在聊天框中則聊天框出現未接對方視訊電話 (未讀)
    * 好友不在線(app關著的情況)
        - app界面出現語音聊天畫面
            1. 接通以後可以進行聊天
            2. 拒絕以後，資料庫/檔案 記錄
                - 若在聊天框中則聊天框出現未接對方視訊電話 (已讀)
                - 若不在聊天框中則聊天框出現未接對方視訊電話 (未讀)
10. 搜尋好友
    * 好友
        - 顯示好友 在線/不在線
        - 可以與好友聊天
    * 非好友
        - 顯示可以加好友
        - 可以與非好友聊天

## 需求(App對應後端)
1. 使用者註冊時 資料庫 新增一個 使用者賬號、密碼、姓、名   
2. 使用者登入時資料庫可以 查詢 使用者的 賬號、密碼 是否是正確的
3. 使用者登入時可以 查詢 好友 在線狀況  
4. 使用者可以 新增 使用者是使用哪一些平台登入
5. 文字聊天
    - 會員可以 查詢 聊天記錄  
    - 會員可以 新增 與 朋友的聊天記錄、日期和文字聊天
6. 語音聊天
    - 會員可以 查詢 聊天記錄  
    - 會員可以 新增 與 朋友的聊天記錄、日期和語音聊天  
7. 視訊聊天  
    - 會員可以 查詢 聊天記錄  
    - 會員可以 新增 與 朋友的聊天記錄、日期和視訊聊天
8. 搜尋好友  
    - 使用者可以 查詢 是否為好友以及在線状况

## 資料庫
![photo/Database-architecture-diagram.jpg.jpg](photo/Database-architecture-diagram.jpg.jpg)

## 架構圖


## App界面
